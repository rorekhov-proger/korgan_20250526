{% extends "base.html" %}

{% block head %}
<meta name="description" content="Профиль пользователя">
<meta name="keywords" content="профиль, личный кабинет, настройки">
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
<main class="profile-container">
    <h1 class="profile-title">Профиль пользователя</h1>
    
    <section class="profile-info" aria-label="Информация пользователя">
        <div class="info-group">
            <label>Имя пользователя:</label>
            <span>{{ user.username }}</span>
        </div>
        
        <div class="info-group">
            <label>Email:</label>
            <span>{{ user.email }}</span>
        </div>
        
        <div class="info-group">
            <label>Дата регистрации:</label>
            <span>{{ user.created_at.strftime('%d.%m.%Y %H:%M') }}</span>
        </div>
        
        {% if user.last_login %}
        <div class="info-group">
            <label>Последний вход:</label>
            <span>{{ user.last_login.strftime('%d.%m.%Y %H:%M') }}</span>
        </div>
        {% endif %}
    </section>
    
    <section class="profile-actions">
        <button id="logoutBtn" class="btn btn-danger" aria-label="Выйти из системы">Выйти</button>
    </section>
</main>

<script>
document.getElementById('logoutBtn').addEventListener('click', async () => {
    try {
        const response = await fetch('/logout');
        const data = await response.json();
        
        if (response.ok) {
            window.location.href = '/login';
        } else {
            alert(data.error || 'Произошла ошибка при выходе');
        }
    } catch (error) {
        console.error('Ошибка при выходе:', error);
        alert('Произошла ошибка при выходе');
    }
});
</script>
{% endblock %} 